<!DOCTYPE html>
<html>
  <head>
    <title>Vodo</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" type="text/css">
    <style id="APP_STYLE"></style>
  </head>
  <body>
    <div id="APP"></div>
    <script>
      window.init = function init (page, nativeWindow, props) {
        window.nativeWindow = nativeWindow
        const { render } = require('react-dom')
        const { createElement: $ } = require('react')
        const { styleEv } = require('../gui/js-css')
        const { default: Context } = require(`../gui/context`)
        const { default: Root } = require(`../gui/pages/${page}`)
        const rootEl = document.getElementById('APP')
        render($(Context, { window, nativeWindow }, $(Root, props)), rootEl)

        function updateStyle () {
          document.getElementById('APP_STYLE').innerHTML = styleEv.content
        }
        updateStyle()
        styleEv.on('style', updateStyle)
      }
    </script>
  </body>
</html>
